このプロジェクトの目的

adventure-web では、モンスター、ポーションなどのオブジェクトは、最初に作成し、セッションスコープに保存して、ゲーム中に使用している。

adventure-web-2 では、最初にオブジェクトを作成するのは、プレーヤーオブジェクトだけで、他はゲームの最中に作成している。

具体的には、マップには、文字列で "goblin"、"dragon"、"potion" とあるだけで、メモリ上にはそれらのオブジェクトはない。
マップでプレーヤーがその場所に来たときに、そのオブジェクトを作成している。

そのオブジェクト(モンスター)は、プレーヤーのmonsterフィールドにセットする。

また、同時に以下にもモンスターオブジェクトをセットしている。
Gameオブジェクトにmapフィールドとは別に backMonsterフィールドを作成している。これは、Monster[][] となっている。
つまり、モンスターが配置されていた map[y][x] に対応する位置にセットしているのである。

これの目的は、一度モンスターを攻撃したあと、その場所を離れて、またその場所に戻った場合、そのモンスターと戦いの続きができるようにと思ったのである。


;; 修正時刻: Fri 2024/12/13 09:59:21
